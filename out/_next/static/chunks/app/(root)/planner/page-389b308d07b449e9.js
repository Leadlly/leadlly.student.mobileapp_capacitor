(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1609],{2672:function(e,t,s){Promise.resolve().then(s.bind(s,6642))},9430:function(e,t,s){"use strict";s.d(t,{Ui:function(){return r},WV:function(){return n},rK:function(){return i}});var a=s(8732),l=s(9088);let n=async()=>{let e=await (0,a.e)();try{let t=await fetch("".concat("http://192.168.1.3:4000","/api/planner/get"),{method:"GET",headers:{"Content-Type":"application/json",Cookie:"token=".concat(e)},credentials:"include",cache:"force-cache",next:{tags:["plannerData"]}});return await t.json()}catch(e){if(e instanceof Error)throw Error("Error fetching planner data: ".concat(e.message));throw Error("An unknown error occurred while fetching planner data!")}},i=async()=>{let e=await (0,a.e)();try{let t=await fetch("".concat("http://192.168.1.3:4000","/api/planner/create"),{method:"GET",headers:{"Content-Type":"application/json",Cookie:"token=".concat(e)},credentials:"include"});return await t.json()}catch(e){if(e instanceof Error)throw Error("Error creating planner: ".concat(e.message));throw Error("An unknown error occurred while creating planner!")}},r=async()=>{let e=await (0,a.e)();try{let t=await fetch("".concat("http://192.168.1.3:4000","/api/planner/update"),{method:"GET",headers:{"Content-Type":"application/json",Cookie:"token=".concat(e)},credentials:"include"}),s=await t.json();return(0,l.revalidateTag)("plannerData"),s}catch(e){if(e instanceof Error)throw Error("Error creating planner: ".concat(e.message));throw Error("An unknown error occurred while creating planner!")}}},6642:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return O}});var a=s(7437),l=s(6990),n=s(2265),i=s(9870),r=s(8675),c=s(2516),o=s(9354);let d=c.zt,x=c.fC,m=c.xz,u=n.forwardRef((e,t)=>{let{className:s,sideOffset:l=4,...n}=e;return(0,a.jsx)(c.VY,{ref:t,sideOffset:l,className:(0,o.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})});u.displayName=c.VY.displayName;var p=e=>{let{todaysTopics:t}=e,s=(0,r.CG)(e=>{var t;return null===(t=e.user.user)||void 0===t?void 0:t.academic.subjects});function l(e){let s=null==t?void 0:t.backRevisionTopics.filter(t=>t.subject.name===e).map(e=>(0,i.fm)(e.topic.name));return(null==s?void 0:s.length)||(null==t?void 0:t.continuousRevisionTopics.length)?null==s?void 0:s.join(", "):"No topics yet!"}function n(e){let s=null==t?void 0:t.continuousRevisionTopics.filter(t=>t.subject.name===e).map(e=>(0,i.fm)(e.topic.name));return(null==s?void 0:s.length)||(null==t?void 0:t.backRevisionTopics.length)?null==s?void 0:s.join(", "):"No topics yet!"}return(0,a.jsxs)("div",{className:"rounded-xl border flex flex-col justify-start overflow-hidden",children:[(0,a.jsx)("div",{className:"flex items-center justify-between px-7 py-4 bg-sidebar-background rounded-t-xl",children:(0,a.jsxs)("div",{className:"flex flex-col justify-start gap-1",children:[(0,a.jsxs)("h4",{className:"text-base md:text-2xl leading-none font-semibold text-black",children:[(0,i.L0)(new Date(null==t?void 0:t.date))===(0,i.L0)(new Date(Date.now()))?"Today":null==t?void 0:t.day,"'s Plan"]}),(0,a.jsxs)("p",{className:"text-xs font-semibold text-[#9E9C9C]",children:[null==t?void 0:t.day," ",(0,i.L0)(new Date(null==t?void 0:t.date))]})]})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto custom__scrollbar",children:(0,a.jsx)("ul",{className:"h-full flex flex-col justify-start",children:null==s?void 0:s.map(e=>(0,a.jsxs)("li",{className:"border-b md:border-none xl:border-b border-b-[#717171] border-opacity-[0.11] last:border-none py-4 px-7",children:[(0,a.jsx)("h4",{className:"text-sm md:text-xl leading-tight font-medium text-black capitalize",children:e.name}),(0,a.jsx)(d,{children:(0,a.jsxs)(x,{children:[(0,a.jsx)(m,{asChild:!0,children:(0,a.jsx)("p",{className:"text-xs md:text-sm leading-tight font-normal truncate text-[#454545] cursor-pointer",children:t&&((null==t?void 0:t.backRevisionTopics.length)>0||t.continuousRevisionTopics.length>0)?(0,a.jsxs)(a.Fragment,{children:[n(e.name),(null==t?void 0:t.backRevisionTopics.length)&&t.continuousRevisionTopics.length?", ":t.continuousRevisionTopics.length?".":"",l(e.name)]}):"No plans yet!"})}),(0,a.jsx)(u,{className:"max-w-md w-full",children:(0,a.jsx)("p",{className:"text-xs md:text-sm leading-tight font-normal whitespace-normal text-[#454545]",children:t&&((null==t?void 0:t.backRevisionTopics.length)>0||t.continuousRevisionTopics.length>0)?(0,a.jsxs)(a.Fragment,{children:[n(e.name),(null==t?void 0:t.backRevisionTopics.length)>0?", ":t.continuousRevisionTopics.length?".":"",l(e.name)]}):"No plans yet!"})})]})})]},e.name))})})]})},h=s(6648),f=s(1976),j=s(9733),v=s(9343),g=s(9772),y=s(1014),w=s(2421),b=s(2468),N=s(3274),k=s(3363),T=s(1413),_=s(4063),D=s(1499),C=s(8047),R=s(7776),E=s(9750),z=s(9430),S=s(6463);let V=g.Ry({chapterName:g.Z_({required_error:"Please select a chapter!"}),topicNames:g.Z_({required_error:"Please select at least one topic"}).array().min(1,{message:"Please select at least one topic"}).default([])});var L=e=>{let{setNewTopicLearnt:t,userSubjects:s,userStandard:i}=e,[r,c]=(0,n.useState)("maths"),[d,x]=(0,n.useState)([]),[m,u]=(0,n.useState)([]),[p,h]=(0,n.useState)(!1),f=(0,S.useRouter)(),g=(0,v.cI)({resolver:(0,y.F)(V)}),L=g.watch("chapterName"),P=async e=>{h(!0);let t={tag:"continuous_revision",topics:e.topicNames.map(e=>({name:e})),chapter:{name:e.chapterName},subject:r,standard:i};try{let e=await (0,E.tV)(t);R.A.success(e.message),await (0,z.Ui)(),g.reset(),f.refresh()}catch(e){R.A.error(null==e?void 0:e.message)}finally{h(!1)}};return(0,n.useEffect)(()=>{(async()=>{try{let e=await (0,C.L)(r,i);x(e.chapters)}catch(e){R.A.error("Unable to fetch chapters!",{description:e.message})}})()},[r,i]),(0,n.useEffect)(()=>{(async()=>{try{let e=await (0,C.D)(r,L,i);u(e.topics)}catch(e){R.A.error("Unable to fetch topics!",{description:e.message})}})()},[r,L,i]),(0,a.jsxs)("div",{className:"w-full px-3 lg:px-7 space-y-6",children:[(0,a.jsx)("div",{className:"w-full flex items-center justify-between",children:(0,a.jsx)("ul",{className:"flex items-center gap-4",children:s.map((e,t)=>(0,a.jsx)("li",{className:(0,o.cn)("capitalize font-semibold text-[#6a6a6a] border px-3 py-1 rounded-lg cursor-pointer",r===e.name?"bg-primary/10 border-primary text-black":""),onClick:()=>{c(e.name),g.setValue("chapterName",""),g.setValue("topicNames",[])},children:e.name},t))})}),(0,a.jsx)(k.l0,{...g,children:(0,a.jsxs)("form",{onSubmit:g.handleSubmit(P),className:"space-y-4",children:[(0,a.jsx)(k.Wi,{control:g.control,name:"chapterName",render:e=>{var t;let{field:s}=e;return(0,a.jsxs)(k.xJ,{children:[(0,a.jsxs)(T.J2,{children:[(0,a.jsx)(T.xo,{asChild:!0,children:(0,a.jsx)(k.NI,{children:(0,a.jsxs)(j.z,{variant:"outline",role:"combobox",className:(0,o.cn)("w-full justify-between",!s.value&&"text-muted-foreground"),children:[s.value?null===(t=d.find(e=>e.name===s.value))||void 0===t?void 0:t.name:"Select chapter",(0,a.jsx)(w.Z,{className:"ml-2 h-4 w-4 shrink-0"})]})})}),(0,a.jsx)(T.yk,{className:"p-0",children:(0,a.jsxs)(_.mY,{children:[(0,a.jsx)(_.sZ,{placeholder:"Search chapter..."}),(0,a.jsxs)(_.e8,{children:[(0,a.jsx)(_.rb,{children:"No chapter found."}),(0,a.jsx)(_.fu,{children:null==d?void 0:d.map(e=>(0,a.jsxs)(_.di,{value:e.name,onSelect:()=>{g.setValue("chapterName",e.name)},children:[(0,a.jsx)(b.Z,{className:(0,o.cn)("mr-2 h-4 w-4",e.name===s.value?"opacity-100":"opacity-0")}),e.name]},e._id))})]})]})})]}),(0,a.jsx)(k.zG,{})]})}}),(0,a.jsx)(k.Wi,{control:g.control,name:"topicNames",render:e=>{let{field:t}=e;return(0,a.jsxs)(k.xJ,{children:[(0,a.jsx)(k.NI,{children:(0,a.jsx)(D.N,{options:m,onValueChange:t.onChange,defaultValue:t.value,placeholder:"Select topics",variant:"inverted",animation:2})}),(0,a.jsx)(k.zG,{})]})}}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(j.z,{variant:"outline",className:"gap-x-2",onClick:()=>t(!1),children:[(0,a.jsx)(l.qg,{className:"w-2 h-2"}),"Back"]}),(0,a.jsx)(j.z,{type:"submit",disabled:p,children:p?(0,a.jsxs)("span",{className:"flex items-center text-sm",children:[(0,a.jsx)(N.Z,{className:"w-4 h-4 mr-2 animate-spin"})," Submitting"]}):"Submit"})]})]})})]})},P=()=>{let[e,t]=(0,n.useState)(!1),s=(0,r.CG)(e=>e.user.user),l=null==s?void 0:s.academic.subjects,i=null==s?void 0:s.academic.standard;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-full rounded-xl py-4 border",children:e?(0,a.jsx)(L,{setNewTopicLearnt:t,userStandard:i,userSubjects:l}):(0,a.jsxs)("div",{className:"w-full px-3 lg:px-7",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("h3",{className:"text-base md:text-2xl lg:text-[32px] leading-none font-bold text-primary",children:["What did you Learnt ",(0,a.jsx)("br",{}),"New Today?"]}),(0,a.jsx)(j.z,{variant:"outline",className:"mt-1 px-2 border-primary text-primary h-5 md:h-6 xl:h-7 uppercase text-xs md:text-sm lg:text-base font-medium",children:"info"})]}),(0,a.jsxs)("div",{className:"flex flex-col xl:flex-row xl:items-center justify-between gap-4 xl:gap-2 my-1",children:[(0,a.jsxs)("div",{className:"text-sm md:text-xl font-medium",children:[(0,a.jsx)("p",{className:"capitalize text-[#333333]",children:"subjects:"}),(0,a.jsx)("p",{className:"text-[#898989]",children:"Maths, Physics, Chemistry and more"})]}),(0,a.jsx)("div",{className:"w-full xl:w-auto flex items-center justify-center xl:justify-start",children:(0,a.jsx)(h.default,{src:"/assets/images/revision_zone.png",alt:"a girl doing her revision",width:150,height:150})})]}),(0,a.jsx)("div",{className:"w-full flex items-center justify-center",children:(0,a.jsxs)(j.z,{className:"h-7 md:h-12 flex items-center gap-2 text-sm md:text-2xl font-bold rounded-md md:rounded-xl",onClick:()=>t(!0),children:["Proceed",(0,a.jsx)(f.Z,{className:"w-3 h-3 md:w-5 md:h-5"})]})})]})})})},G=e=>{let{data:t,setData:s}=e,[r,c]=(0,n.useState)(null);return(0,a.jsxs)("div",{className:"w-full flex flex-col justify-start gap-5 h-full py-4 border rounded-xl overflow-x-hidden overflow-y-auto custom__scrollbar",children:[(0,a.jsxs)("div",{className:"w-full flex items-center justify-between gap-0 md:gap-4 py-2 xl:flex-col xl:items-start xl:justify-normal",children:[(0,a.jsx)("div",{className:"px-3 md:px-7",children:(0,a.jsx)("h4",{className:"text-base md:text-2xl xl:text-3xl leading-none font-semibold text-black",children:"Weekly Plan"})}),(0,a.jsxs)("div",{className:"xl:w-full flex items-center justify-between gap-4 md:gap-x-10 px-3 md:px-7",children:[(0,a.jsx)("div",{className:"text-xs md:text-xl xl:text-2xl leading-none text-[#6e6e6e] font-semibold text-center",children:(0,a.jsxs)("p",{children:[(0,i.a8)(new Date(null==t?void 0:t.startDate))," -"," ",(0,i.a8)(new Date(null==t?void 0:t.endDate))]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 md:space-x-8",children:[(0,a.jsx)(j.z,{variant:"secondary",className:"w-6 h-6 md:w-7 md:h-7 px-0 flex items-center justify-center rounded-full",children:(0,a.jsx)(l.qg,{className:"w-[8px] h-[8px] md:w-3 md:h-3"})}),(0,a.jsx)(j.z,{variant:"secondary",className:"w-6 h-6 md:w-7 md:h-7 px-0 flex items-center justify-center rounded-full",children:(0,a.jsx)(l.AD,{className:"w-[8px] h-[8px] md:w-3 md:h-3"})})]})]})]}),(0,a.jsx)("div",{className:"w-full flex-1 overflow-hidden md:px-5",children:(0,a.jsx)("ul",{className:"w-full flex flex-col justify-start gap-3 h-full overflow-x-hidden overflow-y-auto custom__scrollbar px-3 md:px-2",children:null==t?void 0:t.days.map(e=>(0,a.jsxs)("li",{className:(0,o.cn)("w-full rounded-xl md:text-center border-2 cursor-pointer",(0,i.L0)(new Date(e.date))===(0,i.Gc)()?"bg-primary text-white":"bg-white text-black",(0,i.L0)(new Date(e.date))!==(0,i.Gc)()&&r===e._id&&"border-primary"),onClick:async()=>{await s(null),await s(e),c(e._id)},children:[(0,a.jsxs)("p",{className:"py-2 border-b border-b-slate-300 text-sm md:text-xl flex items-center justify-between md:justify-center gap-4 px-4",children:[(0,a.jsx)("span",{className:"font-semibold",children:e.day}),(0,a.jsx)("span",{children:(0,i.L0)(new Date(e.date))})]}),(0,a.jsx)("p",{className:"w-full py-2 text-xs md:text-base px-4 truncate overflow-hidden",children:e.backRevisionTopics.length>0||e.continuousRevisionTopics.length>0?(0,a.jsxs)(a.Fragment,{children:[e.backRevisionTopics.map(e=>(0,i.fm)(e.topic.name)).join(" / "),e.backRevisionTopics.length>0&&"/",e.continuousRevisionTopics.map(e=>(0,i.fm)(e.topic.name)).join(" / ")]}):(0,a.jsx)(a.Fragment,{children:"No topics"})})]},e._id))})})]})},A=e=>{let{todaysTopics:t,plannerData:s,setData:l}=e;return(0,a.jsxs)("section",{className:"hidden xl:grid grid-cols-2 gap-6 overflow-y-auto custom__scrollbar pr-3",children:[(0,a.jsxs)("div",{className:"grid grid-rows-2 gap-6",children:[(0,a.jsx)(p,{todaysTopics:t}),(0,a.jsx)(P,{})]}),(0,a.jsx)(G,{data:s,setData:l})]})},F=s(2447);let W=F.fC,Z=n.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(F.aV,{ref:t,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...l})});Z.displayName=F.aV.displayName;let Y=n.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(F.xz,{ref:t,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...l})});Y.displayName=F.xz.displayName;let q=n.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(F.VY,{ref:t,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...l})});q.displayName=F.VY.displayName;var U=e=>{let{todaysTopics:t,plannerData:s,setData:l}=e;return(0,a.jsx)("section",{className:"md:hidden w-full",children:(0,a.jsxs)(W,{defaultValue:"todays_plan",className:"w-full",children:[(0,a.jsxs)(Z,{className:"w-full",children:[(0,a.jsx)(Y,{value:"todays_plan",className:"w-full",children:"Today's Plan"}),(0,a.jsx)(Y,{value:"weekly_plan",className:"w-full",children:"Weekly Plan"})]}),(0,a.jsx)(q,{value:"todays_plan",children:(0,a.jsxs)("div",{className:"flex flex-col justify-start gap-4 mb-20",children:[(0,a.jsx)(p,{todaysTopics:t}),(0,a.jsx)(P,{})]})}),(0,a.jsx)(q,{value:"weekly_plan",className:"h-[600px] mb-20",children:(0,a.jsx)(G,{data:s,setData:l})})]})})},I=e=>{let{todaysTopics:t,plannerData:s,setData:l}=e;return(0,a.jsxs)("section",{className:"hidden md:flex flex-col gap-4 overflow-y-auto custom__scrollbar pr-3 xl:hidden",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(p,{todaysTopics:t}),(0,a.jsx)(P,{})]}),(0,a.jsx)(G,{data:s,setData:l})]})},J=e=>{let{data:t}=e,[s,l]=(0,n.useState)(t&&t.days&&t.days.filter(e=>(0,i.L0)(new Date(e.date))===(0,i.L0)(new Date(Date.now())))[0]||null);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A,{plannerData:t,todaysTopics:s,setData:l}),(0,a.jsx)(I,{plannerData:t,todaysTopics:s,setData:l}),(0,a.jsx)(U,{plannerData:t,todaysTopics:s,setData:l})]})},O=async()=>{let[e,t]=(0,n.useState)(null);return(0,n.useEffect)(()=>{(async()=>{let{data:e}=await (0,z.WV)();t(e)})()},[]),(0,a.jsxs)("div",{className:"flex flex-col justify-start gap-4 h-full",children:[(0,a.jsx)(l.h4,{title:"Planner",titleClassName:"text-2xl md:text-3xl lg:text-page-title"}),(0,a.jsx)(J,{data:e})]})}}},function(e){e.O(0,[5473,8100,231,2642,1444,2810,1336,5518,1905,7730,1243,323,1485,9612,4040,803,2380,2863,2971,7023,1744],function(){return e(e.s=2672)}),_N_E=e.O()}]);