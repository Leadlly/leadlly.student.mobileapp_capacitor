(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{1854:function(e,r,t){Promise.resolve().then(t.bind(t,8735)),Promise.resolve().then(t.t.bind(t,8173,23)),Promise.resolve().then(t.t.bind(t,231,23)),Promise.resolve().then(t.t.bind(t,8808,23)),Promise.resolve().then(t.bind(t,7776)),Promise.resolve().then(t.bind(t,8136)),Promise.resolve().then(t.t.bind(t,3054,23)),Promise.resolve().then(t.bind(t,9541)),Promise.resolve().then(t.bind(t,6762)),Promise.resolve().then(t.bind(t,6601)),Promise.resolve().then(t.bind(t,6991)),Promise.resolve().then(t.bind(t,5589)),Promise.resolve().then(t.bind(t,2256)),Promise.resolve().then(t.bind(t,7300)),Promise.resolve().then(t.bind(t,8037)),Promise.resolve().then(t.bind(t,2380)),Promise.resolve().then(t.bind(t,8307)),Promise.resolve().then(t.bind(t,50)),Promise.resolve().then(t.bind(t,5425))},8735:function(e,r,t){"use strict";t.d(r,{GoogleOAuthProvider:function(){return i},Nq:function(){return a}});var n=t(2265);let o=(0,n.createContext)(null);function i(e){let{clientId:r,nonce:t,onScriptLoadSuccess:i,onScriptLoadError:a,children:s}=e,c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{nonce:r,onScriptLoadSuccess:t,onScriptLoadError:o}=e,[i,a]=(0,n.useState)(!1),s=(0,n.useRef)(t);s.current=t;let c=(0,n.useRef)(o);return c.current=o,(0,n.useEffect)(()=>{let e=document.createElement("script");return e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.nonce=r,e.onload=()=>{var e;a(!0),null===(e=s.current)||void 0===e||e.call(s)},e.onerror=()=>{var e;a(!1),null===(e=c.current)||void 0===e||e.call(c)},document.body.appendChild(e),()=>{document.body.removeChild(e)}},[r]),i}({nonce:t,onScriptLoadSuccess:i,onScriptLoadError:a}),u=(0,n.useMemo)(()=>({clientId:r,scriptLoadedSuccessfully:c}),[r,c]);return n.createElement(o.Provider,{value:u},s)}function a(e){let{flow:r="implicit",scope:t="",onSuccess:i,onError:a,onNonOAuthError:s,overrideScope:c,state:u,...l}=e,{clientId:d,scriptLoadedSuccessfully:f}=function(){let e=(0,n.useContext)(o);if(!e)throw Error("Google OAuth components must be used within GoogleOAuthProvider");return e}(),h=(0,n.useRef)(),v=(0,n.useRef)(i);v.current=i;let p=(0,n.useRef)(a);p.current=a;let w=(0,n.useRef)(s);w.current=s,(0,n.useEffect)(()=>{var e,n;if(!f)return;let o="implicit"===r?"initTokenClient":"initCodeClient",i=null===(n=null===(e=null==window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===n?void 0:n.oauth2[o]({client_id:d,scope:c?t:"openid profile email ".concat(t),callback:e=>{var r,t;if(e.error)return null===(r=p.current)||void 0===r?void 0:r.call(p,e);null===(t=v.current)||void 0===t||t.call(v,e)},error_callback:e=>{var r;null===(r=w.current)||void 0===r||r.call(w,e)},state:u,...l});h.current=i},[d,f,r,t,u]);let g=(0,n.useCallback)(e=>{var r;return null===(r=h.current)||void 0===r?void 0:r.requestAccessToken(e)},[]),m=(0,n.useCallback)(()=>{var e;return null===(e=h.current)||void 0===e?void 0:e.requestCode()},[]);return"implicit"===r?g:m}},8732:function(e,r,t){"use strict";t.d(r,{e:function(){return o}});var n=t(9826);let o=async()=>{var e;return null!==(e=(await n.u.get({key:"token"})).value)&&void 0!==e?e:""}},1125:function(e,r,t){"use strict";t.d(r,{gF:function(){return u},PR:function(){return l},pH:function(){return c},Rv:function(){return s},nl:function(){return f},SA:function(){return i},Aj:function(){return d},A9:function(){return a}});var n=t(8732);let o=t(8472).Z.create({baseURL:"http://192.168.1.3:4000",withCredentials:!0,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>e,e=>Promise.reject(e)),o.interceptors.response.use(e=>e,e=>Promise.reject(e));let i=async e=>{try{let r=await fetch("".concat("http://192.168.1.3:4000","/api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include",cache:"no-store"});return await r.json()}catch(e){if(e instanceof Error)throw Error("Error registering user: ".concat(e.message));throw Error("An unknown error occurred while registering user!")}},a=async e=>{try{let r=await fetch("".concat("http://192.168.1.3:4000","/api/auth/verify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include",cache:"no-store"});return await r.json()}catch(e){if(e instanceof Error)throw Error("Error verifying user: ".concat(e.message));throw Error("An unknown error occurred while verifying user!")}},s=async e=>{try{return(await o.post("/api/auth/resend",{email:e})).data}catch(e){if(e instanceof Error)throw Error("Error re-sending OTP: ".concat(e.message));throw Error("An unknown error occurred while re-sending OTP!")}},c=async e=>{try{let r=await fetch("".concat("http://192.168.1.3:4000","/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include",cache:"no-store"});return await r.json()}catch(e){if(e instanceof Error)throw Error("Error signing in user: ".concat(e.message));throw Error("An unknown error occurred while signing in user!")}},u=async e=>{try{let r=await fetch("".concat("http://192.168.1.3:4000","/api/auth/forgetpassword"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"},credentials:"include",cache:"no-store"});return await r.json()}catch(e){if(e instanceof Error)throw Error("Error sending password resetting link: ".concat(e.message));throw Error("An unknown error occurred while sending password resetting link!")}},l=async()=>{try{let e=await (0,n.e)(),r=await fetch("".concat("http://192.168.1.3:4000","/api/auth/user"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},credentials:"include"});return await r.json()}catch(e){if(e instanceof Error)throw Error("Error in fetching logged in user: ".concat(e.message));throw Error("An unknown error occurred while fetching logged in user")}},d=async e=>{try{let r=await (0,n.e)(),t=await fetch("".concat("http://192.168.1.3:4000","/api/user/profile/save"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},credentials:"include"});return console.log(r),await t.json()}catch(e){if(e instanceof Error)throw Error("Error in saving student info: ".concat(e.message));throw Error("An unknown error occurred while saving student info")}},f=async e=>{try{let r=await (0,n.e)(),t=await fetch("".concat("http://192.168.1.3:4000","/api/user/todaysVibe/save"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},credentials:"include"});return await t.json()}catch(e){if(e instanceof Error)throw Error("Error in saving student current mood: ".concat(e.message));throw Error("An unknown error occurred while saving student current mood!")}}},8136:function(e,r,t){"use strict";var n=t(6463),o=t(2265),i=t(5425);function a(e){let{token:r,path:t,isPublicPath:n}=e;return r&&n?"/":r||n?null:"/login"}function s(e){let{token:r,user:t,path:n,isPublicPath:o}=e;if(r&&!o){let e=!!(null==t?void 0:t.academic.standard);if(!e&&"/initial-info"!==n)return"/initial-info";if(e&&"/initial-info"===n)return"/"}return null}function c(e){let{token:r,user:t,path:n,isPublicPath:o}=e;if(r&&!o&&"/initial-info"!==n){let e=!!(null==t?void 0:t.freeTrial.active);if(!e&&"/trial-subscription"!==n)return"/trial-subscription";if(e&&"/trial-subscription"===n)return"/"}return null}function u(e){let{token:r,user:t,path:n,isPublicPath:o}=e;if(r&&!o&&"/trial-subscription"!==n&&"/initial-info"!==n){let e=(null==t?void 0:t.planner)===!0;if(!e&&"/initial-study-data"!==n)return"/initial-study-data";if(e&&"/initial-study-data"===n)return"/"}return null}r.default=e=>{let{children:r}=e,{token:t,user:l}=(0,i.a)(),d=(0,n.usePathname)(),f=(0,n.useRouter)();return(0,o.useEffect)(()=>{let e=["/login","/signup","/verify","/forgot-password","/resetpassword"].some(e=>d.startsWith(e));for(let r of[a,s,c,u]){let n=r({token:t,user:l,path:d,isPublicPath:e});if(n){f.replace(n);break}}},[t,d,f,l]),r}},9541:function(e,r,t){"use strict";t.d(r,{default:function(){return l}});var n=t(7437),o=t(2265),i=t(1444),a=t(9753),s=t(1172);let c=()=>(0,a.xC)({reducer:{user:s.ZP}});var u=t(1125);function l(e){let{children:r}=e,[t,a]=(0,o.useState)(null),l=(0,o.useRef)();return(0,o.useEffect)(()=>{(async()=>{try{let e=await (0,u.PR)();a(e.user)}catch(e){console.error(e)}})()},[]),l.current||(l.current=c(),l.current.dispatch((0,s.ZW)(t))),(0,n.jsx)(i.zt,{store:l.current,children:r})}},5425:function(e,r,t){"use strict";t.d(r,{AuthProviderContext:function(){return c},a:function(){return u}});var n=t(7437),o=t(1125),i=t(9826),a=t(2265);let s=(0,a.createContext)({token:null,setToken:()=>{},user:null,setUser:()=>{}}),c=e=>{let{children:r}=e,[t,c]=(0,a.useState)(null),[u,l]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{let e=await i.u.get({key:"token"});console.log(e),c(e.value)})()},[]),(0,a.useEffect)(()=>{(async()=>{l((await (0,o.PR)()).user)})()},[t]),(0,n.jsx)(s.Provider,{value:{token:t,user:u,setToken:c,setUser:l},children:r})};function u(){let e=(0,a.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1172:function(e,r,t){"use strict";t.d(r,{ZW:function(){return o}});let n=(0,t(9753).oM)({name:"user",initialState:{user:null},reducers:{userData:(e,r)=>{e.user=r.payload}}}),{userData:o}=n.actions;r.ZP=n.reducer},3054:function(){},8808:function(e){e.exports={style:{fontFamily:"'__Mada_e78062', '__Mada_Fallback_e78062'",fontStyle:"normal"},className:"__className_e78062",variable:"__variable_e78062"}}},function(e){e.O(0,[8535,6776,8100,231,2810,8472,5518,1444,9753,803,2380,2971,7023,1744],function(){return e(e.s=1854)}),_N_E=e.O()}]);